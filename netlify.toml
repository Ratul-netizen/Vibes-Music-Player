[build]
  command = "npm run build"
  publish = ".next"

# Enable Netlify's Next.js Runtime so SSR/ISR, routing, and API routes work
[[plugins]]
  package = "@netlify/plugin-nextjs"

[build.environment]
  # Optional but helpful to keep logs clean
  NEXT_TELEMETRY_DISABLED = "1"
  # Pin Node to a stable LTS compatible with many deps
  NODE_VERSION = "20"
  # Force Netlify to use npm even if pnpm-lock.yaml exists
  NETLIFY_USE_PNPM = "false"
  # Instruct npm to bypass strict peer conflicts (React19 vs vaul@0.9.9)
  NPM_FLAGS = "--legacy-peer-deps"
  # Prisma/SQLite connection (file included in repo)
  DATABASE_URL = "file:./data/playlist.db"

